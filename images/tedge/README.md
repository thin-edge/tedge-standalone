# tedge-standalone container image

This container image is a slimmer tedge container (~10MB) that is focused on creating the smallest possible container that can be run on devices with a container engine.

* Uses the UPX'd (compressed) tedge binary to save disk space
* Use busybox as the base container
* No init manager is included, as it relies on the container engine to process in the container

The compose project is made of 3 services:

* mosquitto
* tedge-mapper c8y
* tedge-agent

Note, that all of the above services use the same container image in an effort to save space.

## Getting started

### Start the project

1. Create a `.env` file on the same level as the docker-compose.yaml file

    ```sh
    TEDGE_C8Y_URL=example.eu-latest.cumulocity.com
    DEVICE_ID=tedge_busybox

    # Optional: Set the Cumulocity CA one-time password to be used
    # otherwise it will be autogenerated and the code will be printed on the console
    #DEVICE_ONE_TIME_PASSWORD=""
    ```

1. Start the compose project

    ```sh
    docker compose up --build
    ```

1. If you didn't define a one-time password, then go to the registration URL which is printed on the console under the tedge-mapper-c8y to register the device

### Stop the project

Stop the project using the following command:

```sh
docker compose down
```

If you want to also delete the persisted volumes, then you can use the following command:

```sh
docker compose down -v
```
